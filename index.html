<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>åŸå­ç»“æ„æ¨¡å‹æ¼”ç¤º - 3D å¯äº¤äº’</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta name="description" content="ä¸€ä¸ªç”¨äºè¯¾å ‚æ¼”ç¤ºçš„ 3D åŸå­ç»“æ„æ¨¡å‹ï¼Œå¯åœ¨ iPad / ç”µè„‘æµè§ˆå™¨ä¸­æ‹–åŠ¨æ—‹è½¬è§†è§’å’Œç¼©æ”¾ã€‚">
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      overflow: hidden;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;
      background: #050816;
      color: #fff;
      -webkit-font-smoothing: antialiased;
      touch-action: none;
    }

    #info {
      position: fixed;
      top: 10px;
      left: 10px;
      max-width: 360px;
      padding: 12px 14px;
      border-radius: 12px;
      background: rgba(0, 0, 0, 0.55);
      font-size: 13px;
      line-height: 1.5;
      z-index: 10;
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }

    #info h1 {
      margin: 0 0 6px 0;
      font-size: 18px;
    }

    #info p {
      margin: 4px 0;
    }

    #canvas-container {
      width: 100vw;
      height: 100vh;
    }

    .label {
      font-weight: 600;
      margin-top: 6px;
    }

    .hint {
      opacity: 0.85;
      font-size: 12px;
    }

    @media (max-width: 900px) {
      #info {
        max-width: 80vw;
        font-size: 12px;
      }
      #info h1 {
        font-size: 16px;
      }
    }
  </style>
</head>
<body>
  <div id="info">
    <h1>åŸå­ç»“æ„æ¨¡å‹ï¼ˆå¯æ‹–åŠ¨ï¼‰</h1>
    <p>è¿™æ˜¯ä¸€ä¸ª<strong>ç®€åŒ–</strong>çš„åŸå­æ¨¡å‹ï¼Œç”¨äºæ•™å­¦æ¼”ç¤ºã€‚</p>
    <p class="label">ğŸ”´ åŸå­æ ¸ï¼š</p>
    <p>ä¸­é—´ä¸€å›¢çº¢è‰²å°çƒï¼Œä»£è¡¨è´¨å­å’Œä¸­å­ã€‚</p>
    <p class="label">ğŸ”µ ç”µå­ï¼š</p>
    <p>æ²¿è½¨é“è¿åŠ¨çš„å°è“çƒï¼Œä»£è¡¨ç”µå­ã€‚</p>
    <p>åœ†ç¯è½¨é“è¡¨ç¤ºä¸åŒèƒ½çº§ä¸Šçš„ç”µå­æ´»åŠ¨åŒºåŸŸã€‚</p>
    <p class="hint">ğŸ’¡ æ“ä½œï¼š<br>
      Â· é¼ æ ‡ / å•æŒ‡æ‹–åŠ¨ï¼šæ—‹è½¬è§†è§’<br>
      Â· æ»šè½® / åŒæŒ‡æåˆï¼šç¼©æ”¾è¿œè¿‘
    </p>
  </div>
  <div id="canvas-container"></div>

  <!-- å¤–éƒ¨åº“ï¼ˆéœ€è”ç½‘ï¼‰ï¼šthree.js & OrbitControls -->
  <script src="https://unpkg.com/three@0.128.0/build/three.min.js"></script>
  <script src="https://unpkg.com/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

  <script>
    const container = document.getElementById("canvas-container");
    const scene = new THREE.Scene();

    const camera = new THREE.PerspectiveCamera(
      45,
      window.innerWidth / window.innerHeight,
      0.1,
      1000
    );
    camera.position.set(0, 15, 30);

    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(window.devicePixelRatio || 1);
    renderer.setClearColor(0x050816);
    container.appendChild(renderer.domElement);

    const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
    scene.add(ambientLight);

    const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);
    dirLight.position.set(10, 20, 10);
    scene.add(dirLight);

    const pointLight = new THREE.PointLight(0xff6666, 1.2, 100);
    pointLight.position.set(0, 0, 0);
    scene.add(pointLight);

    const nucleusGroup = new THREE.Group();
    const nucleusMaterial = new THREE.MeshStandardMaterial({
      color: 0xff5555,
      metalness: 0.2,
      roughness: 0.3
    });

    const protonCount = 10;
    for (let i = 0; i < protonCount; i++) {
      const geometry = new THREE.SphereGeometry(0.6, 24, 24);
      const mesh = new THREE.Mesh(geometry, nucleusMaterial);

      const spread = 1.5;
      mesh.position.set(
        (Math.random() - 0.5) * spread,
        (Math.random() - 0.5) * spread,
        (Math.random() - 0.5) * spread
      );
      nucleusGroup.add(mesh);
    }
    scene.add(nucleusGroup);

    const electronConfigs = [
      { radius: 6, count: 2, speed: 0.8 },
      { radius: 9, count: 4, speed: 0.5 },
      { radius: 12, count: 6, speed: 0.35 }
    ];

    const electrons = [];
    const electronMaterial = new THREE.MeshStandardMaterial({
      color: 0x66ccff,
      metalness: 0.1,
      roughness: 0.2
    });

    function createOrbit(radius) {
      const segments = 128;
      const geometry = new THREE.BufferGeometry();
      const positions = [];
      for (let i = 0; i <= segments; i++) {
        const angle = (i / segments) * Math.PI * 2;
        const x = Math.cos(angle) * radius;
        const z = Math.sin(angle) * radius;
        positions.push(x, 0, z);
      }
      geometry.setAttribute(
        "position",
        new THREE.Float32BufferAttribute(positions, 3)
      );
      const material = new THREE.LineBasicMaterial({
        color: 0x8888ff,
        transparent: true,
        opacity: 0.4
      });
      const line = new THREE.LineLoop(geometry, material);
      scene.add(line);
    }

    electronConfigs.forEach((cfg) => {
      createOrbit(cfg.radius);
      for (let i = 0; i < cfg.count; i++) {
        const geo = new THREE.SphereGeometry(0.5, 24, 24);
        const mesh = new THREE.Mesh(geo, electronMaterial);

        const phase = (i / cfg.count) * Math.PI * 2;
        electrons.push({
          mesh,
          radius: cfg.radius,
          speed: cfg.speed,
          phase
        });

        scene.add(mesh);
      }
    });

    function createStars(count) {
      const starGeo = new THREE.BufferGeometry();
      const positions = [];

      for (let i = 0; i < count; i++) {
        const x = (Math.random() - 0.5) * 200;
        const y = (Math.random() - 0.5) * 200;
        const z = (Math.random() - 0.5) * 200;
        positions.push(x, y, z);
      }

      starGeo.setAttribute(
        "position",
        new THREE.Float32BufferAttribute(positions, 3)
      );

      const starMat = new THREE.PointsMaterial({
        color: 0xffffff,
        size: 0.7,
        transparent: true,
        opacity: 0.6
      });

      const stars = new THREE.Points(starGeo, starMat);
      scene.add(stars);
    }
    createStars(600);

    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.08;
    controls.enablePan = false;
    controls.minDistance = 15;
    controls.maxDistance = 60;

    renderer.domElement.addEventListener("touchmove", function (e) {
      e.preventDefault();
    }, { passive: false });

    const clock = new THREE.Clock();

    function animate() {
      requestAnimationFrame(animate);
      const delta = clock.getDelta();

      nucleusGroup.rotation.y += delta * 0.3;

      electrons.forEach((e) => {
        e.phase += delta * e.speed;
        const angle = e.phase;
        const x = Math.cos(angle) * e.radius;
        const z = Math.sin(angle) * e.radius;
        const y = Math.sin(angle * 2) * 0.7;
        e.mesh.position.set(x, y, z);
      });

      controls.update();
      renderer.render(scene, camera);
    }

    animate();

    function onWindowResize() {
      const width = window.innerWidth;
      const height = window.innerHeight;

      camera.aspect = width / height;
      camera.updateProjectionMatrix();
      renderer.setSize(width, height);
    }

    window.addEventListener("resize", onWindowResize);
    window.addEventListener("orientationchange", function () {
      setTimeout(onWindowResize, 300);
    });
  </script>
</body>
</html>
